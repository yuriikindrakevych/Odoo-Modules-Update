<?xml version="1.0" encoding="UTF-8"?>
<odoo>
     <template id="mobius_sale_order_reports.document_tax_totals_pl_short">
            <!--
                Generic template to display tax totals in pdf reports.
                Used by invoices, SO and PO.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
            -->
            <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                <tr class="border-black o_subtotal">
                    <td><strong t-esc="subtotal['name']"/></td>

                    <td class="text-right">
                        <span
                            t-att-class="oe_subtotal_footer_separator"
                            t-esc="subtotal['formatted_amount']"
                        />
                    </td>
                </tr>

                <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
                <t t-call="mobius_sale_order_reports.tax_groups_totals_pl_short"/>
            </t>

            <!--Total amount with all taxes-->
            <tr class="border-black o_total">
                <td><strong>Suma</strong></td>
                <td class="text-right">
                    <span t-esc="tax_totals['formatted_amount_total']"/>
                </td>
            </tr>
    </template>

    <template id="mobius_sale_order_reports.tax_groups_totals_pl_short">
            <!--
                Generic template to display a list of tax groups with the related amounts.

                ARGUMENTS:
                - tax_totals: dict in the form generated by account.move's _get_tax_totals.
                - subtotal_to_show: The subtotal we need to render the groups from
            -->
            <t t-foreach="tax_totals['groups_by_subtotal'][subtotal_to_show]" t-as="amount_by_group">
                <tr>
                    <t t-set="vat_more_zero" t-value="doc.is_vat_more_zero(amount_by_group['formatted_tax_group_amount'])"/>
                    <!-- <t t-if="vat_more_zero"> -->
                    <t t-if="True">
                        <t t-if="len(tax_totals['groups_by_subtotal'][subtotal_to_show]) > 1 or (tax_totals['amount_untaxed'] != amount_by_group['tax_group_base_amount'])">
                            <td>
                                <span t-esc="amount_by_group['tax_group_name']"/>
                            </td>
                            <td class="text-right o_price_total">
                                <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']"/>
                            </td>
                        </t>
                        <t t-else="">
                            <td><span class="text-nowrap" t-esc="amount_by_group['tax_group_name']"/></td>
                            <td class="text-right o_price_total">
                                <span class="text-nowrap" t-esc="amount_by_group['formatted_tax_group_amount']" />
                            </td>
                        </t>
                    </t>
                </tr>
            </t>
    </template>


    <template id="mobius_sale_order_reports.zamowienie_layout_short">
        <t t-if="not o" t-set="o" t-value="doc"/>
        <t t-if="not company">
            <!-- Multicompany -->
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o and o.company_id.sudo()">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        <div class="header">
                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_header_short"/>
        </div>
        <div class="article o_report_layout_standard" >
            <t t-out="0" />
        </div>
        <div class="footer o_standard_footer">
            <t t-call="mobius_sale_order_reports.sale_order_zamowienie_footer_short"/>
        </div>

    </template>

    <template id="mobius_sale_order_reports.sale_order_zamowienie_header_short">
        <link rel="stylesheet" href="/mobius_sale_order_reports/static/src/css/style.css"/>
        <table class="" style="width:100%; height:0;" cellspacing="0">
            <col width="50%"/>
            <col width="50%"/>
            <tr class="R6" style="">
                <td class="R6C0">
                    <div class="R6C0">
                        <img alt="logo" class="" src="/web/binary/company_logo"
                            style="object-fit: cover; height: 80px; text-align:inherit; vertical-align: top;"/>
                    </div>

                </td>
                <td class="R6C0">
                    <div style="width:100%; height:40x; line-height: 40px; overflow:hidden; text-align: inherit;vertical-align: middle;">
                        <t t-if="is_zamowienie">
                            <p style="line-height: 0.9em;" t-esc="'Zamówienie ' + str(doc.name)"></p>
                        </t>
                        <t t-else="">
                            <p style="line-height: 0.9em;" t-esc="'Oferta ' + str(doc.name)"></p>
                        </t>
                        <p style="line-height: 0.9em;" t-esc="'z dnia ' + str(doc.create_date.strftime('%d-%m-%Y'))"></p>
                    </div>
                </td>
            </tr>
        </table>
    </template>

    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_first_short">
            <table class="" style="width:100%; height:0;margin:0; padding:0;" cellspacing="0">
                <col width="50%"/>
                <col width="50%"/>
                <hr></hr>
                <tr class="R7" style="">
                    <td class="R7C0">
                        <div style="width:100%; height: 100%; line-height: inherit; overflow:hidden; text-align: left;">
                            <span style="vertical-align: middle;">Dane Klienta</span>
                        </div>
                    </td>
                    <td class="R7C0">
                        <div style="width:100%; height: 100%; line-height: inherit; overflow:hidden; text-align: left;">
                            <t t-if="is_zamowienie">
                                <span style="vertical-align: middle;">Za zamówienie odpowiada</span>
                            </t>
                            <t t-else="">
                                <span style="vertical-align: middle;">Za ofertę odpowiada</span>
                            </t>
                        </div>
                    </td>
                </tr>
            </table>
            <hr></hr>
            <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="50%"/>
                <col width="50%"/>
                <tr class="R8" style="">
                    <td class="R8C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: left;">
                            <t t-if="doc.partner_id.company_type == 'company'">
                                <span style="font-weight: bold;" t-esc="str('Firma ') + str(doc.partner_id.name if doc.partner_id.name else '')"/>
                            </t>
                            <t t-elif="doc.partner_id.parent_id">
                                <span style="font-weight: bold;" t-esc="str('Firma ') + str(doc.partner_id.parent_id.name if doc.partner_id.parent_id.name else '')"/>
                                <br/>
                                <span style="font-weight: bold;" t-esc="str(doc.partner_id.title.name if doc.partner_id.title.name else '') + ' ' + str(doc.partner_id.name if doc.partner_id.name else '')"/>                            
                            </t>
                            <t t-else="">
                                <span style="font-weight: bold;" t-esc="str(doc.partner_id.title.name if doc.partner_id.title.name else '') + ' ' + str(doc.partner_id.name if doc.partner_id.name else '')"/>
                            </t>
                            <br/>
                            <span t-esc="str(doc.partner_id.street)"/>
                            <br/>
                            <t t-if="doc.partner_id.city_ua">
                                <span t-esc="str(doc.partner_id.city_ua.name if doc.partner_id.city_ua.name else '')"/>
                                <br/>
                            </t>
                            <t t-else="">
                                <t t-if="doc.partner_id.street2">
                                    <span t-esc="str(doc.partner_id.street2 if doc.partner_id.street2 else '')"/>
                                    <br/>
                                </t>
                            </t>
                            <span t-esc="str(doc.partner_id.zip if doc.partner_id.zip else '')"/>
                            <br/>
                            <span style="font-weight: bold;" t-esc="'tel: ' + str(doc.partner_id.phone if doc.partner_id.phone else '')"/>
                            <br/>
                            <span style="font-weight: bold;" t-esc="'e-mail: ' + str(doc.partner_id.email if doc.partner_id.email else '')"/>
                        </div>
                    </td>
                    <td class="R8C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: left;">
                            <span style="font-weight: bold;" t-esc="doc.user_id.name if doc.user_id.name else ''"/>
                            <br/>
                            <span/>
                            <br/>
                            <span/>
                            <span/>
                            <br/>
                            <span style="font-weight: bold;">tel: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.user_id.phone if doc.user_id.phone else '')"/>
                            <br/>
                            <span style="font-weight: bold;">e-mail: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.user_id.email if doc.user_id.email else '')"/>
                        </div>
                    </td>
                </tr>
            </table>
            <hr></hr>
            <t t-if="doc.building_object">
                <table class="" style="width:100%; height:0;" cellspacing="0">
                    <col width="100%"/>
                    <tr class="R7" style="">
                        <td class="R7C0">
                            <div style="width:100%; height: 100%; line-height: inherit; overflow:hidden; text-align: left;">
                                <span style="vertical-align: middle;margin-left: 12.5%;font-weight: bold;">Dotyczy: </span>
                                <span style="vertical-align: middle; font-weight: normal;" t-esc="doc.building_object.name if doc.building_object.name else ''"/>
                            </div>
                        </td>
                    </tr>
                </table>
                <hr></hr>
            </t>
            <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="50%"/>
                <col width="50%"/>
                <tr class="R7" style="">
                    <td class="R7C0">
                        <div style="width:100%; height: 100%; line-height: inherit; overflow:hidden; text-align: left;">
                            <span style="vertical-align: middle;margin-left: 25%;font-weight: bold;">Waluta: </span>
                            <span style="vertical-align: middle; font-weight: normal;" t-esc="doc.pricelist_id.currency_id.name if doc.pricelist_id.currency_id.name else 'NOT EXIST PRICELIST' "/>
                        </div>
                    </td>
                    <td class="R7C0">
                    </td>
                </tr>
            </table>
    </template>


    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_second_short">
            <t t-set="number" t-value="1"/>
            <table style="width:100%; height:0;margin:0; padding:0;" cellspacing="0">
                <col width="5%"/>
                <col width="85%"/>
                <col width="10%"/>
<!--                 <col width="5%"/>
                <col width="37%"/>
                <col width="10%"/>
                <col width="12%"/>
                <col width="12%"/>
                <col width="12%"/>
                <col width="12%"/> -->
                <tr class="R4">
                    <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Lp.</div>
                    </td>
                    <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Nazwa towaru</div>
                    </td>
                    <!--                <td class="R4C0">-->
                    <!--                    <div style="width:100%;height:41px;overflow:hidden;">Район</div>-->
                    <!--                </td>-->
                    <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Ilość</div>
                    </td>
<!--                     <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Cena netto</div>
                    </td> -->
                    <!--                <td class="R4C0">-->
                    <!--                    <div style="width:100%;height:41px;overflow:hidden;">Вага</div>-->
                    <!--                </td>-->
<!--                     <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Wartość netto</div>
                    </td>
                    <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">% VAT</div>
                    </td>
                    <td class="R4C0">
                        <div style="width:100%;height:41px;overflow:hidden;">Wartość Brutto</div>
                    </td> -->
                </tr>
            </table>
            <t t-foreach="doc.order_line" t-as="line">
                <t t-set="ok" t-value="line.get_order_line_can_be_printed()"/>
                <t t-if="ok">
                    <t t-if="line.tax_id.amount">
                        <t t-if="doc.is_tax_id_included_in_price(line.tax_id)">
                            <t t-set="brutto_zero" t-value="doc.check_can_print(line.price_subtotal, line.tax_id.amount, False)"/>
                        </t>
                        <t t-else="">
                            <t t-set="brutto_zero" t-value="doc.check_can_print(line.price_subtotal, line.tax_id.amount, True)"/>
                        </t>
                    </t>
                    <t t-else="">
                        <t t-set="brutto_zero" t-value="doc.check_can_print(line.price_subtotal, False, False, True)"/>
                    </t>
                    <t t-if="line.display_type == 'line_section'">
                        <t t-set="brutto_zero" t-value="True"/>
                    </t>
                <t t-if="brutto_zero">
                <table style="width:100%; height:15px; " cellspacing="0">
                    <t t-if="not line.display_type">
                        <col width="5%"/>
                        <col width="85%"/>
                        <col width="10%"/>
<!--                         <col width="5%"/>
                        <col width="37%"/>
                        <col width="10%"/>
                        <col width="12%"/>
                        <col width="12%"/>
                        <col width="12%"/>
                        <col width="12%"/> -->
                        <tr class="R5" style="page-break-inside: avoid;">
                                <td class="R5C0">
                                    <div style="width:100%;overflow:hidden;" t-esc="number">1</div>
                                </td>
                                <td class="R5C0">
                                    <div style="width:100%;overflow:hidden;"
                                         t-esc="str(line.product_id.categ_id.category_desc if line.product_id.categ_id.category_desc else '') + ' ' + str(line.product_id.name if line.product_id.name else '')">
                                    </div>
                                </td>
                                <td class="R5C0">
                                    <div style="width:100%;overflow:hidden;"
                                         t-esc="str(doc.get_int_or_float_qweb(line.product_uom_qty) if int(line.product_uom_qty) else '')">
                                    </div>
                                </td>
<!--                                 <td class="R5C0" style="text-align: right">
                                    <div style="width:100%;overflow:hidden;">
                                        <t t-set="is_discount" t-value="doc.is_discont(line.discount)"/>
                                        <t t-set="price_netto" t-value="doc.get_price_netto(line.price_subtotal, line.product_uom_qty)"/>
                                        <t t-if="is_discount">
                                            <span t-esc="str(price_netto) + ' (dod. rabat ' + str(doc.get_int_or_float_qweb(line.discount)) + '%)'"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="str(price_netto)"/>
                                        </t>
                                    </div>
                                </td>

                                <td class="R5C0" style="text-align: right">
                                    <div style="width:100%;overflow:hidden;"
                                         t-esc="line.price_subtotal" t-options="{'widget': 'float', 'precision': 2}">
                                    </div>
                                </td>
                                <td class="R5C0" style="text-align: right">
                                    <div style="width:100%;overflow:hidden;">
                                        <t t-if="line.tax_id.amount">
                                            <span t-esc="str(line.tax_id.description if line.tax_id.description else '')"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="str('0 %')"/>
                                        </t>
                                    </div>
                                </td>
                                <td class="R5C0" style="text-align: right">
                                    <div style="width:100%;overflow:hidden;">
                                        <t t-if="line.tax_id.amount">
                                            <t t-if="doc.is_tax_id_included_in_price(line.tax_id)">
                                                <span t-esc="(line.price_subtotal - (line.price_subtotal * line.tax_id.amount) / 100)" t-options="{'widget': 'float', 'precision': 2}"/>
                                            </t>
                                            <t t-else="">
                                                <span t-esc="(line.price_subtotal + (line.price_subtotal * line.tax_id.amount) / 100)" t-options="{'widget': 'float', 'precision': 2}"/>
                                            </t>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="(line.price_subtotal)" t-options="{'widget': 'float', 'precision': 2}"/>
                                        </t>
                                    </div>
                                </td> -->
                                <t t-set="number" t-value="number + 1"/>
                        </tr>
                    </t>
                    <t t-if="line.display_type == 'line_section'">
                        <col width="100%"/>
                        <tr class="R9" style="page-break-inside: avoid;">
                            <td class="R9C0">
                                <div style="width:100%; height:35px; line-height: 35px; overflow:hidden; text-align: inherit;">
                                    <span style="vertical-align: middle;" t-field="line.name"/>
                                </div>
                            </td>
                        </tr>
                    </t>
                </table>
            </t>
            </t>
            </t>
    </template>

    <template id="mobius_sale_order_reports.sale_order_zamowienie_footer_short">
        <link rel="stylesheet" href="/mobius_sale_order_reports/static/src/css/style.css"/>
            <hr></hr>
            <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="100%"/>
                <tr class="R7" style="">
                    <td class="R7C0">
                        <div style="width:100%; height: 100%; line-height: inherit; overflow:hidden; text-align: left; font-size: 18px"
                            t-esc="str(doc.company_id.name if doc.company_id.name else '')">
                        </div>
                    </td>
                </tr>
            </table>
            <hr></hr>
            <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="33%"/>
                <col width="33%"/>
                <col width="33%"/>
                <tr class="R8" style="">
                    <td class="R8C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: center;">
                            <span t-esc="doc.company_id.street if doc.company_id.street else ''"/>
                            <br/>
                            <span t-esc="str(doc.company_id.zip if doc.company_id.zip else '')"/>
                            <br/>
                            <br/>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.website if doc.company_id.website else '')"/>
                        </div>
                    </td>
                    <td class="R8C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: center;">
                            <span style="font-weight: bold;">tel: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.phone  if doc.company_id.phone else '')"/>
                            <br/>
                            <span style="font-weight: bold;">e-mail: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.email if doc.company_id.email else '')"/>
                            <br/>
                            <br/>
                            <br/>
                            <p> Strona: <span class="page"/> / <span class="topage"/></p>
                        </div>
                    </td>
                    <td class="R8C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: center;">
                            <span style="font-weight: bold;">NIP: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.vat if doc.company_id.vat else '')"/>
                            <br/>
                            <span style="font-weight: bold;">REGON: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.partner_id.regon if doc.company_id.partner_id.regon else '')"/>
                            <br/>
                            <span style="font-weight: bold;">KRS: </span>
                            <span style="font-weight: normal;" t-esc="str(doc.company_id.partner_id.krs if doc.company_id.partner_id.krs else '')"/>
                        </div>
                    </td>
                </tr>
            </table>
    </template>

    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_table_two_short">
        <link rel="stylesheet" href="/mobius_sale_order_reports/static/src/css/style.css"/>
        <br/>
            <div id="total" class="row justify-content-end">
                <div class="col-4">
                    <table class="table table-sm">
                        <t t-set="tax_totals" t-value="json.loads(doc.tax_totals_json)"/>
                        <t t-call="mobius_sale_order_reports.document_tax_totals_pl_short"/>
                    </table>
                </div>
            </div>
    </template>

    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_additional_info_short">
        <link rel="stylesheet" href="/mobius_sale_order_reports/static/src/css/style.css"/>
            <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="33%"/>
                <col width="33%"/>
                <col width="33%"/>
                <tr class="R10" style="border-top: 3px solid black">
                    <td class="R10C0" style="border-right: solid;">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: left;margin-top: 5px;">
                            <p style="font-weight: bold;font-size:17px;line-height: 1.2em;">CENA</p>
                            <p style="font-size:16px;line-height: 1.2em;" t-esc="str(doc.pricelist_id.description if doc.pricelist_id.description else '')" t-lang="pl_PL"></p>
                            <br style="display: block;content: '';margin-top: 25px;"/>
                            <p style="font-weight: bold;font-size:17px;line-height: 1.2em;">WARUNKI PŁATNOŚCI</p>
                            <t t-if="doc.payment_term_id.name">

                                <p style="font-size:16px;line-height: 1.2em;" t-esc="str(doc.payment_term_id.name if doc.payment_term_id.name else '')"/>
                            </t>
                            <t t-else="">
                                <p style="font-size:16px;line-height: 1.2em;" t-esc="str('do uzgodnienia')"/>
                            </t>
                        </div>
                    </td>
                    <td class="R10C0" style="border-right: solid; ">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: center;margin-top: 5px;">
                            <p style="font-weight: bold;font-size:17px;line-height: 1.2em;">DOSTAWA</p>
                            <!-- <p style="font-size:16px;line-height: 1.2em;" t-esc="str(doc.get_delivery_in_order())"></p> -->
                            <t t-if="not is_zamowienie">
                                <p style="font-size:16px;line-height: 1.2em;" t-esc="str('Dostępność określana jest przez Dział Obsługi Klienta bezpośrednio przed zamówieniem. Gwarancja terminu dostawy następuje po złożeniu zamówienia.')"></p>
                            </t>
                        </div>
                    </td>
                    <td class="R10C0">
                        <div style="width:100%; height: 100%;  overflow:hidden; text-align: center;margin-top: 5px;">
                            <p style="font-weight: bold;font-size:17px;line-height: 1.2em;">WAŻNOŚĆ OFERTY DO</p>
                            <p style="font-size:16px;line-height: 1.2em;" t-esc="str(doc.validity_date if doc.validity_date else '')"></p>
                        </div>
                    </td>
                </tr>
            </table>
            <br/>
            <t t-if="not is_html_empty(doc.note)">
                <table class="" style="width:100%; height:0;" cellspacing="0">
                    <col width="100%"/>
                    <tr class="R10" style="">
                        <td class="R10C0">
                            <div style="width:100%; height: 100%;  overflow:hidden; text-align: left;">
                                <p style="font-weight: bold;font-size:17px;line-height: 1.2em;">Uwagi</p>
                                <em style="font-size:16px;line-height: 1.2em;" t-raw="doc.note"></em>
                            </div>
                        </td>
                    </tr>
                </table>
            </t>
<!--             <table class="" style="width:100%; height:0;" cellspacing="0">
                <col width="100%"/>
                <tr>
                    <td>
                        <img class="float-right" src="/mobius_sale_order_reports/static/img/stamp_pl.png"
                            width="600" height="600" style="height: 250px; width: 250px;"/>
                    </td>
                </tr>
            </table> -->
    </template>


    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_short">
                        <style type="text/css">
                            hr {
                                border: none;
                                margin: 5px 0;
                                border: 1px solid black;
                            }
                        </style>
                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_first_short"/>
    </template>



    <template id="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_short">
                        <style type="text/css">
                            hr {
                                border: none;
                                margin: 5px 0;
                                border: 1px solid black;
                            }
                        </style>
                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_second_short"/>
                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_table_two_short"/>
                <!-- <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_additional_info_short"/> -->
    </template>



    <template id="mobius_sale_order_reports.sale_order_zamowienie_short">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
            <t t-set="doc" t-value="doc.with_context(lang='pl_PL')"/>
                    <t t-call="mobius_sale_order_reports.zamowienie_layout_short">
                        <div class="page">
                            <link rel="stylesheet" href="/mobius_sale_order_reports/static/src/css/style.css"/>
                            <div class="oe_structure"/>
                                <t t-set="is_zamowienie" t-value="doc.get_is_zamowienie()"/>
                                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_short"/>
                                <t t-call="mobius_sale_order_reports.sale_order_zamowienie_main_second_page_short"/>
                        </div>
                    </t>
            </t>
        </t>
    </template>
</odoo>