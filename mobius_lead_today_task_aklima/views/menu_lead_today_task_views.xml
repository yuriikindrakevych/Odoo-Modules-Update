<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_calendar_event_search_inherit" model="ir.ui.view">
        <field name="name">calendar.event.search.inherit</field>
        <field name="model">calendar.event</field>
        <field name="inherit_id" ref="calendar.view_calendar_event_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <filter string="Today" name="today_test" domain="[('start', '&gt;=', datetime.datetime.now().strftime('%Y-%m-%d 00:00:00')),('start', '&lt;=',datetime.datetime.now().strftime('%Y-%m-%d 23:23:59'))]"/>
                <separator/>
            </xpath>
        </field>
    </record>

    <record id="action_calendar_event_inherit" model="ir.actions.act_window">
        <field name="name">Meetings</field>
        <field name="res_model">calendar.event</field>
        <field name="view_mode">form,tree</field>
        <field name="view_id" ref="calendar.view_calendar_event_tree"/>
        <field name="search_view_id" ref="view_calendar_event_search_inherit"/>
        <field name="context">{
                'search_default_today_test': 1, 
                }
        </field>
        <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            No meetings found. Let's schedule one!
          </p><p>
            The calendar is shared between employees and fully integrated with
            other applications such as the employee leaves or the business
            opportunities.
          </p>
        </field>
    </record>



        <record id="crm_lead_action_my_activities_inherit" model="ir.actions.act_window">
            <field name="name">My Activities Lead</field>
            <field name="res_model">crm.lead</field>
            <field name="view_mode">tree,kanban,graph,pivot,calendar,form,activity</field>
            <field name="view_id" ref="crm.crm_lead_view_list_activities"/>
            <field name="domain">[('activity_ids','!=',False)]</field>
            <field name="search_view_id" ref="crm.view_crm_case_my_activities_filter"/>
            <field name="context">{
                    'search_default_assigned_to_me': 1,
                    'search_default_activities_today': 1, 
                    }
            </field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    Looks like nothing is planned.
                </p><p>
                    Schedule activities to keep track of everything you have to do.
                </p>
            </field>
        </record>

        <record id="purchase_order_action_my_activities_inherit" model="ir.actions.act_window">
            <field name="name">My Activities Purchase</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.order</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="purchase.purchase_order_tree"/>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="purchase.view_purchase_order_filter"/>
            <field name="context">{
                'search_default_my_purchases': 1,
                'search_default_activities_today': 1,
                }</field>
            <field name="help" type="html">
              <p class="o_view_nocontent_smiling_face">
                No request for quotation found. Let's create one!
              </p><p>
                Requests for quotation are documents that will be sent to your suppliers to request prices for different products you consider buying.
                Once an agreement has been found with the supplier, they will be confirmed and turned into purchase orders.
              </p>
            </field>
        </record>


       <record id="view_res_partner_filter_inherit" model="ir.ui.view">
            <field name="name">res.partner.select</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <field name="user_id" invisible="1"/>
                    <filter string="My" name="assigned_to_me" domain="[('user_id', '=', uid)]"/>
                    <separator/>
                </xpath>
            </field>
        </record>


        <record id="contact_action_my_activities_inherit" model="ir.actions.act_window">
            <field name="name">My Activities Contact</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="base.view_partner_tree"/>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="mobius_lead_today_task_aklima.view_res_partner_filter_inherit"/>
            <field name="context">{
                'search_default_activities_today': 1,
                }
            </field>
        </record>

         <record id="sale_action_my_activities_inherit" model="ir.actions.act_window">
            <field name="name">My Activities Sale</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">sale.order</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="sale.view_order_tree"/>
            <field name="domain">[]</field>
            <field name="search_view_id" ref="sale.sale_order_view_search_inherit_quotation"/>
            <field name="context">{
                'search_default_my_quotation': 1,
                'search_default_activities_today': 1,
                }
            </field>
        </record>

    <record id="view_today_task_form" model="ir.ui.view">
        <field name="name">today.task.wizard.form</field>
        <field name="model">today.task.wizard</field>
        <field name="priority">10</field>
        <field name="arch" type="xml">
            <form create="false" edit="false" delete="false">
                <sheet>
                    <div class="row">
                        <div class="col-md-12 d-flex align-items-center justify-content-center p-0">
                            <div>
                                <button name="action_calendar_list"
                                    type="object"
                                    string="Open Meeting"
                                    style="padding: 10px; width:200px; font-size: 16px; font-weight: bold;"
                                    />
                                <span style="font-size: 26px; font-weight: bold;margin-left: 10px;margin-top:10px">
                                    <field name="count_today_calendar_meeting"/>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 d-flex align-items-center justify-content-center p-0">
                            <div class="m-5">
                                <div>
                                    <button name="action_open_lead"
                                        type="object"
                                        string="Open Lead"
                                        style="padding: 10px; width:200px; font-size: 16px; font-weight: bold;"
                                        />
                                    <span style="font-size: 26px; font-weight: bold;margin-left: 10px;margin-top:10px">
                                        <field name="count_today_lead"/>
                                    </span>
                                </div>
                                <div>
                                    <button name="action_open_contact"
                                        type="object"
                                        string="Open Contact"
                                        style="padding: 10px; width:200px; font-size: 16px; font-weight: bold;"
                                        />
                                    <span style="font-size: 26px; font-weight: bold;margin-left: 10px;margin-top:10px">
                                        <field name="count_today_contact"/>
                                    </span>
                                </div>
                                <div>
                                    <button name="action_open_sale_order"
                                        type="object"
                                        string="Open Sale Order"
                                        style="padding: 10px; width:200px; font-size: 16px; font-weight: bold;"
                                        />
                                    <span style="font-size: 26px; font-weight: bold;margin-left: 10px;margin-top:10px">
                                        <field name="count_today_sale_order"/>
                                    </span>
                                </div>
                                <div>
                                    <button name="action_open_purchase_order"
                                        type="object"
                                        string="Open Purchase Order"
                                        style="padding: 10px; width:200px; font-size: 16px; font-weight: bold;"
                                        />
                                    <span style="font-size: 26px; font-weight: bold;margin-left: 10px;margin-top:10px">
                                        <field name="count_today_purchase_order"/>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </sheet>

            <footer>
            </footer>

            </form>
        </field>
    </record>


    <record id="action_today_task" model="ir.actions.act_window">
        <field name="name">Today Tasks</field>
        <field name="res_model">today.task.wizard</field>
        <field name="view_mode">form</field>
    </record>

    <record id="action_today_task_open_form" model="ir.actions.act_window.view">
        <field name="view_mode">form</field>
        <field name="view_id" ref="view_today_task_form"/>
    </record>

    <record model="ir.actions.server" id="id_act_server"> 
        <field name="name">Today Tasks</field> 
        <field name="model_id" ref="mobius_lead_today_task_aklima.model_today_task_wizard"/>
        <field name="binding_model_id" eval="False"/>
        <field name="state">code</field> 
        <field name="code">
        action = model.alternative_action()
        </field> 
    </record>

    <menuitem id="menu_lead_today_task"
        name="Today Tasks"
        action="id_act_server"
        sequence="3"/>
</odoo>